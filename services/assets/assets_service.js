//
// Author: Raja Kannan
//

'use strict';

const models = require('../db/models');

class AssetsService {
  constructor() {

  }

  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Get assets by team id
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  async getAssetsByTeamId(teamId) {
    return await models.Asset.findAll({
      where: {
        TeamId: teamId
      },
      raw: true
    });
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Create asset
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  async createAsset(serial, model, ownerEmail, teamId) {
    await models.Asset.create({
      serial: serial,
      model: model,
      ownerEmail: ownerEmail,
      TeamId: teamId,
    });
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Delete all assets
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  async deleteAllAssets() {
    return await models.Asset.destroy({
      where: {},
      truncate: false
    });
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Delete assets by team id
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  async deleteAssetsByTeamId(teamId) {
    return await models.Asset.destroy({
      where: {
        TeamId: teamId
      },
      truncate: false
    });
  }
}

module.exports = new AssetsService();